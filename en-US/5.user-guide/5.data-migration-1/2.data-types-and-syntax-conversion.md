Data types and syntax conversion 
=====================================================

This topic describes the data type and syntax mapping between different source databases and OceanBase Database, so that you can understand the impact of migration operations on your business before migrating databases. 

Background 
-------------------------------

In an OMS migration task, the types of the source and destination databases do not usually match. OMS can automatically convert data types and syntax that are not supported by the destination database.

Oracle data type conversion 
------------------------------------------------

Generally, when migrating an Oracle database to an OceanBase Oracle tenant, OMS supports data migration and incremental synchronization for most data types. If the version of OceanBase Database is earlier than V2.2.30, OMS converts data of the FLOAT(n) type to `NUMBER(n*0.30103)`. In versions later than V2.2.30, data of the FLOAT type can be migrated as is. 
**Notice**



* Data of the CLOB and BLOB types must be less than 48 MB in size.

  

* Data of the LONG, ROWID, BFILE, LONG RAW, XMLType, and UDT types cannot be migrated.

  





|      **Oracle data type**      |                                                                                   **Data type of OceanBase Database in Oracle mode**                                                                                    |
|--------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| CHAR                           | CHAR                                                                                                                                                                                                                    |
| NCHAR                          | NCHAR                                                                                                                                                                                                                   |
| VARCHAR2                       | VARCHAR2                                                                                                                                                                                                                |
| NVARCHAR2                      | NVARCHAR2                                                                                                                                                                                                               |
| NUMBER                         | NUMBER                                                                                                                                                                                                                  |
| NUMBER (p, s)                  | NUMBER(p,s)                                                                                                                                                                                                             |
| LONG                           | Full migration and verification of the data are supported. Incremental synchronization is not supported.                                                                                                                |
| RAW                            | RAW                                                                                                                                                                                                                     |
| CLOB                           | CLOB                                                                                                                                                                                                                    |
| NCLOB                          | NCLOB                                                                                                                                                                                                                   |
| BLOB                           | BLOB                                                                                                                                                                                                                    |
| FLOAT(n)                       | * Versions earlier than OceanBase Database V2.2.30: NUMBER(n \* 0.30103)   * OceanBase Database V2.2.30 and later versions: FLOAT    |
| BINARY_FLOAT                   | BINARY_FLOAT                                                                                                                                                                                                            |
| BINARY_DOUBLE                  | BINARY_DOUBLE                                                                                                                                                                                                           |
| DATE                           | DATE                                                                                                                                                                                                                    |
| TIMESTAMP                      | TIMESTAMP                                                                                                                                                                                                               |
| TIMESTAMP WITH TIME ZONE       | TIMESTAMP WITH TIME ZONE                                                                                                                                                                                                |
| TIMESTAMP WITH LOCAL TIME ZONE | TIMESTAMP WITH LOCAL TIME ZONE                                                                                                                                                                                          |
| INTERVAL YEAR(p) TO MONTH      | INTERVAL YEAR(p) TO MONTH                                                                                                                                                                                               |
| INTERVAL DAY(p) TO SECOND      | INTERVAL DAY(p) TO SECOND                                                                                                                                                                                               |
| ROWID                          | Not supported                                                                                                                                                                                                           |
| BFILE                          | Not supported                                                                                                                                                                                                           |
| LONG RAW                       | Full migration and verification of the data are supported. Incremental synchronization is not supported.                                                                                                                |
| XMLType                        | Not supported                                                                                                                                                                                                           |
| UDT                            | Not supported                                                                                                                                                                                                           |



Conversion of Oracle table partitions 
----------------------------------------------------------

When OMS is used to migrate data from an Oracle database, the system automatically converts your business SQL statements. However, the conversion performed in OceanBase Database V2.2.30 is different from that in V2.2.50. 


|                                                                                                          **Source table definition**                                                                                                           |                                                                                                                                                                                                                                                                                               **Table after conversion in OceanBase Database V2.2.30**                                                                                                                                                                                                                                                                                               |                                                                                    **Table after conversion in OceanBase Database V2.2.50 and later versions**                                                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ```unknow CREATE TABLE T_RANGE_0 ( A INT, ```                                                                                                                                                                          | ```unknow CREATE TABLE "T_RANGE_0" ( "A" NUMBER, "B" NUMBER NOT NULL, PRIMARY KEY ("B", "A") )PARTITION BY RANGE ("A")( .... ); CREATE UNIQUE INDEX ON "T_RANGE_0"(B); ```  * The primary key column does not contain the partition column.   * The partition column is a physical column.   * A composite primary key is formed by joining the partition column with the primary key column.   * A global unique index is added to the original primary key column.    | ```unknow CREATE TABLE "T_RANGE_0" ( "A" NUMBER, "B" NUMBER NOT NULL, CONSTRAINT "T_RANGE_10_UK" UNIQUE ("B") )PARTITION BY RANGE ("A")( .... ); ```                                                                       |
| ```unknow CREATE TABLE T_RANGE_10 ( "A" INT, "B" INT, "C" DATE, "D" NUMBER GENERATED ALWAYS AS (TO_NUMBER(TO_CHAR("C",'dd'))) VIRTUAL, CONSTRAINT "T_RANGE_10_PK" PRIMARY KEY (A) )PARTITION BY RANGE(D)( .... ); ```  | ```unknow CREATE TABLE T_RANGE_10 ( "A" INT NOT NULL, "B" INT, "C" DATE, "D" NUMBER GENERATED ALWAYS AS (TO_NUMBER(TO_CHAR("C",'dd'))) VIRTUAL, CONSTRAINT "T_RANGE_10_PK" PRIMARY KEY (A, C) )PARTITION BY RANGE(D)( .... ); ```                                                                                                                                                                                                                                                                                                                                                                                            | ```unknow CREATE TABLE T_RANGE_10 ( "A" INT NOT NULL, "B" INT, "C" DATE, "D" NUMBER GENERATED ALWAYS AS (TO_NUMBER(TO_CHAR("C",'dd'))) VIRTUAL, CONSTRAINT "T_RANGE_10_PK" UNIQUE (A) )PARTITION BY RANGE(D)( .... ); ```  |
| ```unknow CREATE TABLE T_RANGE_1 ( A INT, B INT, UNIQUE (B) )PARTITION BY RANGE(A)( partition P_MAX values less than (10) ); ```                                                                                       | -- \[WARNING\] Create global index on no primary key table is unsupported. Object: "GUYUE"."T_RANGE_1"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | The source table definition is supported                                                                                                                                                                                                           |
| ```unknow CREATE TABLE T_RANGE_2 ( A INT, B INT NOT NULL, UNIQUE (B) )PARTITION BY RANGE(A)( partition P_MAX values less than (10) ); ```                                                                              | ```unknow CREATE TABLE "T_RANGE_2" ( "A" NUMBER, "B" NUMBER NOT NULL, PRIMARY KEY ("B", "A") )PARTITION BY RANGE ("A")( .... ); ```                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | The source table definition is supported                                                                                                                                                                                                           |
| ```unknow CREATE TABLE T_RANGE_3 ( A INT, B INT, UNIQUE (A) )PARTITION BY RANGE(A)( .... ); ```                                                                                                                        | -- \[WARNING\] Create global index on no primary key table is unsupported. Object: "GUYUE"."T_RANGE_2"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | The source table definition is supported                                                                                                                                                                                                           |
| ```unknow CREATE TABLE T_RANGE_4 ( A INT NOT NULL, B INT, UNIQUE (A) )PARTITION BY RANGE(A)( .... ); ```                                                                                                               | ```unknow CREATE TABLE "T_RANGE_4" ( "A" NUMBER NOT NULL, "B" NUMBER, PRIMARY KEY ("A") )PARTITION BY RANGE ("A")( .... ); ```                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | ```unknow CREATE TABLE "T_RANGE_4" ( "A" NUMBER NOT NULL, "B" NUMBER, PRIMARY KEY ("A") )PARTITION BY RANGE ("A")( .... ); ```                                                                                             |
| ```unknow CREATE TABLE T_RANGE_5 ( A INT, B INT, UNIQUE (A, B) )PARTITION BY RANGE(A)( partition P_MAX values less than (10) ); ```                                                                                    | -- \[WARNING\] Create global index on no primary key table is unsupported. Object: "GUYUE"."T_RANGE_5"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | The source table definition is supported                                                                                                                                                                                                           |
| ```unknow CREATE TABLE T_RANGE_6 ( A INT NOT NULL, B INT, UNIQUE (A, B) )PARTITION BY RANGE(A)( partition P_MAX values less than (10) ); ```                                                                           | -- \[WARNING\] Create global index on no primary key table is unsupported. Object: "GUYUE"."T_RANGE_5"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | The source table definition is supported                                                                                                                                                                                                           |
| ```unknow CREATE TABLE T_RANGE_7 ( A INT NOT NULL, B INT NOT NULL, UNIQUE (A, B) )PARTITION BY RANGE(A)( partition P_MAX values less than (10) ); ```                                                                  | ```unknow CREATE TABLE "T_RANGE_7" ( "A" NUMBER NOT NULL, "B" NUMBER NOT NULL, PRIMARY KEY ("A", "B") )PARTITION BY RANGE ("A")( .... ); ```                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | ```unknow CREATE TABLE "T_RANGE_7" ( "A" NUMBER NOT NULL, "B" NUMBER NOT NULL, PRIMARY KEY ("A", "B") )PARTITION BY RANGE ("A")( .... ); ```                                                                               |
| ```unknow CREATE TABLE T_RANGE_8 ( "A" INT, "B" INT, "C" INT NOT NULL, UNIQUE (A), UNIQUE (B), UNIQUE (C) )PARTITION BY RANGE(B)( partition P_MAX values less than (10) ); ```                                         | ```unknow CREATE TABLE "T_RANGE_8" ( "A" NUMBER, "B" NUMBER, "C" NUMBER NOT NULL, PRIMARY KEY ("C", "B"), UNIQUE ("A"), UNIQUE ("B"), UNIQUE ("C") )PARTITION BY RANGE ("B")( .... ); ```                                                                                                                                                                                                                                                                                                                                                                                                                                    | The source table definition is supported                                                                                                                                                                                                           |
| ```unknow CREATE TABLE T_RANGE_9 ( "A" INT, "B" INT, "C" INT NOT NULL, UNIQUE(A), UNIQUE(B), UNIQUE (C) )PARTITION BY RANGE(C)( partition P_MAX values less than (10) ); ```                                           | ```unknow CREATE TABLE "T_RANGE_9" ( "A" NUMBER, "B" NUMBER, "C" NUMBER NOT NULL, PRIMARY KEY ("C"), UNIQUE ("A"), UNIQUE ("B") )PARTITION BY RANGE ("C")( .... ); ```                                                                                                                                                                                                                                                                                                                                                                                                                                                       | ```unknow CREATE TABLE "T_RANGE_9" ( "A" NUMBER, "B" NUMBER, "C" NUMBER NOT NULL, PRIMARY KEY ("C"), UNIQUE ("A"), UNIQUE ("B") )PARTITION BY RANGE ("C")( .... ); ```                                                     |


